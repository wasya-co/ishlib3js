
<!-- Import maps polyfill -->
<!-- Remove this when import maps will be widely supported -->
<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

<script type="importmap">
  {
    "imports": {
      "three": "/wp-content/themes/wasya_co_wp_theme/vendor/threejs/three.module.js",
      "three/addons/": "/wp-content/themes/wasya_co_wp_theme/vendor/threejs/jsm/"
    }
  }
</script>

<script type="module">

  import * as THREE from 'three';

  import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
  import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

  const w = 300;
  const h = 300;

  let camera, controls, scene, renderer;

  init();
  // render();
  animate();

  function init() {

    const container = document.createElement( 'div' )

    // fov — Camera frustum vertical field of view.
    // aspect — Camera frustum aspect ratio.
    // near — Camera frustum near plane.
    // far — Camera frustum far plane.
    camera = new THREE.PerspectiveCamera( 45, w/h, 1, 1600 )
    camera.position.set( - 1.8, 0.6, 2.7 )

    scene = new THREE.Scene({})

    const loader = new GLTFLoader().setPath( '/wp-content/themes/wasya_co_wp_theme/data/obj/' )
        loader.load( 'cyberpunk-laptop.glb', function ( gltf ) {
          $("#rotatingC span.label").css('display', 'none')
          document.getElementById('rotatingC').appendChild( container )

          scene.add( gltf.scene )
          render()
        } );

    renderer = new THREE.WebGLRenderer({
      alpha: true,
      antialias: true,
    });
    // renderer.setClearColor( 0x000000, 0 ); // default
    renderer.setPixelRatio( window.devicePixelRatio );
    renderer.setSize( w, h );
    renderer.toneMapping = THREE.ACESFilmicToneMapping;
    renderer.toneMappingExposure = 1;
    renderer.outputEncoding = THREE.sRGBEncoding;
    container.appendChild( renderer.domElement );

    controls = new OrbitControls( camera, renderer.domElement );
    // controls.addEventListener( 'change', render ); // use if there is no animation loop
    controls.minDistance = 400;
    controls.maxDistance = 800;
    controls.target.set( 0, 0, - 0.2 );
    controls.autoRotate = true;
    controls.update();

    window.addEventListener( 'resize', onWindowResize );
  }

  function onWindowResize() {
    camera.aspect = w / h;
    camera.updateProjectionMatrix();
    renderer.setSize( w, h );
    render();
  }

  function render() {
    renderer.render( scene, camera );
  }
  function animate() {
    requestAnimationFrame( animate );
    controls.update();
    renderer.render( scene, camera );
  }

</script>

<div id="rotatingC" class="r2">
            <span class="label" style="display: none;">Loading...</span>
          <div><canvas data-engine="three.js r145" width="600" height="600" style="display: block; width: 300px; height: 300px; touch-action: none;"></canvas></div></div>